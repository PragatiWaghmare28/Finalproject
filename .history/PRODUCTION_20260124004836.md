Production deployment notes
==========================

This file documents simple production deployment options for the Video-RAG project.

1) Systemd service (recommended for single server)

- Place `backend/.env` with production values (DB, API keys, etc.).
- Build frontend once on the host (or as part of CI):

```bash
cd /home/codenza/Finalproject/video-rag-app
npm ci --production
npm run build
```

- Create a systemd service file at `/etc/systemd/system/videorag.service` (example below).

- Reload systemd and enable service:

```bash
sudo systemctl daemon-reload
sudo systemctl enable --now videorag.service
sudo journalctl -u videorag.service -f
```

2) Docker / Docker Compose

- Build and run using the included `docker-compose.yml` (recommended for containerized hosts).

```bash
# from project root
docker-compose -f docker-compose.yml up --build -d
```

If the host's `docker` requires sudo, either use `sudo` or add your user to the `docker` group.

3) Service file example (systemd)

Create `/etc/systemd/system/videorag.service` with the following content (adjust `User`, paths and `PYTHON` as needed):

```ini
[Unit]
Description=Video-RAG API (uvicorn)
After=network.target

[Service]
Type=simple
User=codenza
WorkingDirectory=/home/codenza/Finalproject/backend
Environment=PYTHONPATH=/home/codenza/Finalproject
Environment=PATH=/home/codenza/.local/bin:/usr/bin:/bin
ExecStart=/usr/bin/python3.11 -m uvicorn backend.app.main:app --host 0.0.0.0 --port 8000 --workers 1
Restart=on-failure
RestartSec=5s

[Install]
WantedBy=multi-user.target
```

Notes:
- For production, consider running UVicorn behind a reverse proxy (nginx) and adding TLS.
- Tune `--workers` to the number of CPU cores for better concurrency (or use gunicorn + uvicorn workers).
- Ensure `backend/.env` contains any required secrets and that file permissions are protected.